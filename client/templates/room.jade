template(name="room")

    h2 #{roomName}

    #profile
      h4 Profile

      .well
        if profile
          if profile.image
            .profile-pic(style="background: #{profile.image}")
          if profile.description
            span.description-container
              span.description #{profile.description}
        if ownProfile
          input.btn.btn-default.edit-description(value="Edit profile")
          form.hidden.form-group
            textarea.form-control
            input.btn.default-btn(value="submit" type="submit")

    h4 Nodes:

    #nodes
      label Parent
      each parentNode
        span(class='label parentNode label-default #{state}') #{username}
      label Children
      each node
        span(class='label node label-default #{state}') #{username}

    unless ownProfile
      h4 Tracks
      #player.well
        if queued.count
          .queue
            ul
              each queued
                li.item
                  span.artwork
                    img(src="#{artwork_url}")
                  span.title #{title}
                  span.user #{user.username}
        if switchState
          input.btn.btn-default.switch-on(value="Listen to user")
        else
          input.btn.btn-default.switch-off(value="Go back to own queue")

    if ownProfile

      h4 Playlists
      #playlists.well
        ul
          each playlists
            li.playlist.item(data-name="#{this.name}")
              if isDefault
                label Queue
              else
                label #{this.name}
              if playlistState
                a.play-playlist Listen to this playlist
              if isDefault
                a.red.delete-playlist.pull-right Clear
              else
                a.red.delete-playlist.pull-right Delete
              .queue
                ul
                  each tracks
                    li(draggable="true", data-id="#{_id}").item
                      span.artwork
                        img(src="#{artwork_url}")
                      a.remove-track Remove
                      span.title #{title}
                      span.user #{user.username}rack
        form.input-group(data-action="create-playlist")
          input.form-control.search-input(data-value="new-playlist" placeholder="Make a playlist")
          span.input-group-btn
            input.btn.btn-default(type="submit" value="Create")
